<!DOCTYPE html>
<html xmlns = "http://www.w3.org/1999/xhtml">
<head>
    <title>Q promise from function</title>
    <script src = "http://cdnjs.cloudflare.com/ajax/libs/q.js/0.9.2/q.js"></script>
</head>
<body>
    <div id = "answer">The answer to Life, the Universe and Everything is: </div>
    <script>


                function answerToEverything (offset) {
                        if (isNaN (offset)) {
                                throw new Error ('Offset parameter should be a number!')
                        }
                        return 42 + offset;
                }

                // taka bi se izpalnilo pri sinhrnonnoto, no pri asinhronnoto ste se otpechata nakraia rezultata
                //        document.getElementById ("answer").innerHTML += answerToEverything (4);

                // drug nachin za sazdavane na promisi fcall e function call
                Q.fcall (answerToEverything, 2)
                 .then (function (theAnswer) {
                         console.log (theAnswer);
                         document.getElementById ("answer").innerHTML += theAnswer;
                 }, function (error) {
                         console.log (error);
                 });

                document.getElementById ("answer").innerHTML += " text before asynch call ";
                document.getElementById ("answer").innerHTML += " another text ";
    </script>
</body>
</html>
